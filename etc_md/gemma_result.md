============================================================
RunPod Pod 서버 API 전체 기능 통합 테스트
============================================================

ℹ 서버 URL: http://213.192.2.68:40110
ℹ RunPod Pod에서 실행 중인 FastAPI 서버를 테스트합니다
ℹ 성능 측정 모드 활성화 (QUANTITATIVE_METRICS.md 지표 측정)
ℹ 반복 횟수: 3
✓ 서버 연결 성공: {'status': 'healthy', 'version': '1.0.0'}
ℹ    ⏱️ 응답 시간: 0.65초
ℹ    서버 URL: http://213.192.2.68:40110

============================================================
테스트 데이터 생성
============================================================

ℹ kr3.tsv에서 테스트 데이터 생성 중...
✓ 테스트 데이터 생성 완료: 10개 레스토랑

============================================================
Qdrant에 데이터 Upload
============================================================

✓ 총 200개 포인트가 Qdrant에 upload되었습니다.
ℹ   - 리뷰: 200개
ℹ   - 레스토랑: 10개
ℹ   ⏱️ 응답 시간: 12.48초
✓ 테스트 데이터 준비 완료
ℹ 테스트 레스토랑 ID: 1
ℹ 테스트 리뷰 수: 20개

============================================================
1. 감성 분석 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:18:01,567 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✓ 감성 분석 성공 (평균 처리 시간: 8.99초)
  - 평균 처리 시간: 8.990초
  - P95 처리 시간: 21.656초
  - P99 처리 시간: 21.656초
  - 최소/최대: 2.549초 / 21.656초
  - 성공률: 100.0% (3/3)
⚠   ⚠ 평균 목표 미달성 (목표: 1.2초, 실제: 8.99초)
⚠   ⚠ P95 목표 미달성 (목표: 3.2초, 실제: 21.66초)
⚠   ⚠ P99 목표 미달성 (목표: 6.8초, 실제: 21.66초)
ℹ 정확도 평가 (Ground Truth 비교):
  - MAE (Positive Ratio): 0.00%
  - MAE (Negative Ratio): 0.00%

============================================================
2. 배치 감성 분석 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:19:28,847 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✓ 배치 감성 분석 성공 (평균 처리 시간: 74.66초)
ℹ 배치 처리 시간 통계 (10개 레스토랑):
  - 평균: 74.655초
  - P95: 76.528초
  - P99: 76.528초
  - 최소/최대: 71.076초 / 76.528초
  - 처리량: 0.01 req/s
  - 성공률: 100.0% (3/3)
⚠   ⚠ 목표 범위 미달성 (목표: 5.0-10.0초, 실제: 74.66초)

============================================================
3. 리뷰 요약 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:24:20,503 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✓ 리뷰 요약 성공 (평균 처리 시간: 31.34초)
ℹ 처리 시간 통계:
  - 평균: 31.338초
  - P95: 92.784초
  - P99: 92.784초
  - 처리량: 0.03 req/s
  - 성공률: 100.0% (3/3)
⚠   ⚠ 평균 목표 미달성 (목표: 2.5초, 실제: 31.34초)
⚠   ⚠ P95 목표 미달성 (목표: 4.8초, 실제: 92.78초)
⚠   ⚠ P99 목표 미달성 (목표: 9.5초, 실제: 92.78초)
2026-01-18 23:27:54,818 - absl - INFO - Using default tokenizer.

============================================================
4. 배치 리뷰 요약 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:27:54,824 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✗ 요청 1/3 타임아웃 (timeout=180초)
✗ 성능 측정 실패: 성공한 요청이 없습니다.
ℹ   모든 요청이 예외로 실패했습니다. (총 3개)
✗ 성능 측정 실패

============================================================
5. 강점 추출 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:39:56,113 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✗ 요청 1/3 타임아웃 (timeout=180초)
✗ 성능 측정 실패: 성공한 요청이 없습니다.
ℹ   모든 요청이 예외로 실패했습니다. (총 3개)
✗ 성능 측정 실패

============================================================
6. 벡터 검색 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:51:57,303 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✗ 요청 1/3 타임아웃 (timeout=30초)
✗ 성능 측정 실패: 성공한 요청이 없습니다.
ℹ   모든 요청이 예외로 실패했습니다. (총 3개)
✗ 성능 측정 실패

============================================================
7. 리뷰 이미지 검색 테스트
============================================================

ℹ 성능 측정 모드: 3회 반복 실행 중...
2026-01-18 23:53:58,577 - scripts.gpu_monitor - ERROR - GPU 모니터 초기화 실패: NVML Shared Library Not Found
✗ 요청 1/3 타임아웃 (timeout=60초)
✗ 성능 측정 실패: 성공한 요청이 없습니다.
ℹ   모든 요청이 예외로 실패했습니다. (총 3개)
✗ 성능 측정 실패

============================================================
테스트 결과 요약
============================================================

✓ 감성 분석: 통과
✓ 배치 감성 분석: 통과
✓ 리뷰 요약: 통과
✗ 배치 리뷰 요약: 실패
✗ 강점 추출: 실패
✗ 벡터 검색: 실패
✗ 리뷰 이미지 검색: 실패

총 3/7 테스트 통과
ℹ 
성능 측정 모드로 실행되었습니다.
ℹ 더 자세한 메트릭은 SQLite 데이터베이스를 확인하세요:
ℹ   sqlite3 metrics.db
ℹ 
QUANTITATIVE_METRICS.md의 SQL 쿼리를 사용하여 추가 분석이 가능합니다.
✓ 
결과가 저장되었습니다: gemma.json
✗ 4개 테스트 실패