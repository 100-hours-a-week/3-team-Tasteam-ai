#### 3.3. Qdrant Vector Database (on-disk 모드)

**책임**: 벡터 데이터 영속성 및 검색

**주요 기능:**
- 벡터 데이터 저장 및 검색
- HNSW 인덱스 기반 고성능 검색
- MMAP 및 OS 페이지 캐시 활용

---

#### 3.4. RunPod Pod + 로컬 vLLM + Watchdog (옵션 2)

**책임**: 고성능 LLM 추론 및 비용 최적화

**주요 기능:**
- **로컬 vLLM**: RunPod Pod 환경에서 vLLM 직접 사용
  - 네트워크 오버헤드 없음
  - 모델이 항상 메모리에 로드 (Cold Start 없음)
  - Continuous Batching 자동 활용
  - 최고의 추론 성능 달성
- **외부 Watchdog**: GPU 모니터링 및 자동 종료
  - GPU 사용률 모니터링 (`nvidia-smi`)
  - 최근 요청 확인 (FastAPI `/health` 엔드포인트)
  - 유휴 시 Pod 자동 종료 (RunPod API)
  - 최소 실행 시간 보장 (`MIN_RUNTIME`)
  - 연속 idle 카운팅 (`IDLE_LIMIT`)

**장점:**
1. **최고 성능**: 네트워크 오버헤드 없이 최고의 추론 성능
2. **비용 최적화**: 자동 종료로 유휴 시간 비용 절감
3. **안정성**: 외부 모니터링으로 서버 안정성 향상
4. **유연성**: 모니터링 로직 변경 시 서버 재배포 불필요

**프로젝트에 도움이 되는 이유:**
- **대규모 처리**: 대량의 리뷰를 빠르게 처리해야 하는 경우 최적
- **성능 중요**: 응답 시간이 중요한 프로덕션 환경에 적합
- **비용 효율성**: Watchdog로 유휴 시간 비용 절감
- **예측 가능한 비용**: 사용 시간 기준 과금으로 비용 예측 가능

자세한 구현 가이드는 [RUNPOD_POD_VLLM_GUIDE.md](RUNPOD_POD_VLLM_GUIDE.md)를 참조하세요.

**Qdrant on-disk 모드 선택 이유:**

1. **데이터 영속성 및 안정성**
   - 서버 재시작 후에도 데이터가 유지되어 안정적인 운영이 가능합니다
   - 대규모 리뷰 데이터의 손실 위험을 방지합니다
   - 프로덕션 환경에서 필수적인 데이터 안정성을 보장합니다

2. **비용 최적화**
   - RAM 사용을 최소화하여 클라우드 환경에서 메모리 비용을 크게 절감합니다
   - 대규모 벡터 데이터를 메모리에 모두 로드할 필요 없이 필요한 부분만 메모리에 매핑합니다
   - 클라우드 인프라 비용을 최소화하면서도 높은 성능을 유지합니다

3. **대규모 데이터 처리 성능**
   - HNSW(Hierarchical Navigable Small World) 구조를 MMAP(Memory-Mapped Files)과 OS 레벨 페이지 캐시를 활용하여 대규모 컬렉션에서도 실용적인 성능을 제공합니다
   - OS가 자주 접근하는 데이터를 자동으로 페이지 캐시에 유지하여 메모리 기반 성능에 근접한 속도를 제공합니다
   - 수백만 개의 리뷰 벡터를 효율적으로 처리할 수 있습니다

4. **다양한 작업 처리**
   - 벡터 검색, 리뷰 업데이트, 배치 처리 등 다양한 작업에서 높은 성능을 발휘합니다
   - 실시간 검색과 배치 업데이트를 동시에 효율적으로 처리합니다
   - 프로젝트의 다양한 기능(감성 분석, 요약, 강점 추출, 이미지 검색)을 지원합니다

5. **인프라 단순화**
   - 별도의 벡터 데이터베이스 서버를 운영할 필요 없이 애플리케이션과 함께 동작하여 인프라 관리 부담을 줄입니다
   - 서버 할당 및 네트워크 설정이 불필요하여 배포 및 운영이 간단합니다
   - 단일 프로세스로 모든 기능을 제공하여 디버깅 및 모니터링이 용이합니다

**프로젝트에 도움이 되는 이유:**

- **대규모 리뷰 데이터 처리**: 레스토랑 리뷰 플랫폼은 수천, 수만 개의 리뷰를 처리해야 하며, Qdrant on-disk는 이러한 대규모 데이터를 효율적으로 관리합니다
- **실시간 검색 성능**: 벡터 검색 기반의 의미 검색, 요약, 강점 추출 기능에서 빠른 응답 시간을 제공합니다
- **비용 효율성**: 클라우드 환경에서 RAM 비용이 높은 상황에서 on-disk 모드는 비용을 크게 절감하면서도 성능을 유지합니다
- **데이터 안정성**: 리뷰 데이터는 비즈니스에 중요한 자산이므로 영속성 보장이 필수적입니다
- **확장성**: 리뷰 데이터가 증가해도 디스크 기반 저장으로 확장이 용이합니다
