현재 metric

로그 파일, 중요 메트릭은 Sqlite

구현 전략

1. (초기) analysis_metrics만으로 SKIP 구현

2. (초기 셋팅의 한계로 개선) metrics 커졌을 때 병목/쿼리 비용을 근거로 analysis_state로 분리

---

1. 초기

스케줄러/워커가 사실상 1개

트래픽이 크지 않아서 MAX(created_at) 조회가 부담이 없음

“가끔 과호출/중복 실행”이 생겨도 비용/리스크가 크지 않음

포트폴리오에서 “초기 단순 구현”을 강조하고 싶음

이때 로직은 대충:

최근 성공 실행시간(= error_count=0 중 최신 created_at)을 조회해서

interval 이내면 SKIP

✅ 장점: 테이블 하나, 구현 빠름
⚠️ 단점: metrics 테이블이 커지면 조회 비용↑, 역할 혼합

2. 초기 셋팅의 한계로 개선

아래 중 하나라도 해당되면 state 테이블이 거의 정답이야:

음식점 수/실행 횟수가 늘어서 metrics가 커질 것

나중에 분산/멀티워커 가능성이 있음

“SKIP/재시도 정책”이 복잡해질 예정

“마지막 성공 시각”을 정확하고 빠르게 조회해야 함

포트폴리오에서 “관측(metrics) vs 상태(state) 분리”를 보여주고 싶음

✅ 장점: 조회 O(1), 개념 깔끔, 확장 쉬움
⚠️ 단점: 테이블 하나 더(근데 사실상 비용 거의 0)

---

구현의 이유